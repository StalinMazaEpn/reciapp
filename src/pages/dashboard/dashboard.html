
  <ion-header>
    <ion-toolbar>      
      <div *ngIf="isAuthenticated; else elseHeader">
        <ion-title text-center showWhen="ios">Hola, {{(user | async)?.name}}!</ion-title>
        <button ion-button icon-only menuToggle>
          <ion-icon name="menu"></ion-icon>
          <ion-title text-center showWhen="android,windows">Hola, {{(user | async)?.name}}!</ion-title>
        </button>
      </div>
      <ng-template #elseHeader>
        <ion-title showWhen="ios" text-center>Bienvenido!</ion-title>
        <button ion-button icon-only menuToggle>
          <ion-icon name="menu"></ion-icon>
          <ion-title text-center showWhen="android,windows">Bienvenido!</ion-title>
        </button> 
      </ng-template>      

    </ion-toolbar>
  </ion-header>
  

  <ion-content padding> 

    <ion-list>
      <ion-list-header color="light"> Recicladores Cercanos </ion-list-header>
      <!--<ion-item small>  {{reciclador_tot}}  </ion-item>-->
    </ion-list>

    <div *ngIf="isAuthenticated; else elseLogin">
      <ion-list>
        <ion-list-header color="light"> Tus Recicladores </ion-list-header>
        <ion-list>
          <ion-row *ngIf="(recyclers | async)?.length==0" text-center>
            <ion-card text-center>
              <ion-card-content>
                <ion-item text-center>No tienes recicladores favoritos</ion-item>
                <div >Encuentra tu reciclador más cercano en el mapa</div>
                <div text-center>
                    <button ion-button outline item-end icon-left (click)="openMap()">
                        <ion-icon name="add-circle"></ion-icon>
                        Agregar Favorito
                      </button>
                      <!--a href="index.html" class="button"  ion-button outline item-end icon-left><ion-icon name="add-circle"></ion-icon>
                        Agregar Favoritos</a-->
                </div>
                    
                  <!--ion-list>
                      <ion-item>
                          No tienes recicladores favoritos. Encuentra tu reciclador más cercano en el mapa.
                        <button ion-button outline item-end icon-left>
                          <ion-icon name="star"></ion-icon>
                          Mapa
                        </button>
                      </ion-item>
                    </ion-list-->
              </ion-card-content>
            </ion-card>
          </ion-row>

          <ion-row *ngFor='let recycler$ of recyclers | async'>            
              <ion-col *ngIf="recycler$ | async as recycler;  else loading" > <!-- then loggedout;-->
              <ion-item (tap)="goRecycler(recycler)">
                  <ion-avatar item-start>
                    <img src="{{recycler.image}}">
                  </ion-avatar>
                  <h2>{{recycler.name}}</h2>
              </ion-item>
            </ion-col>
            <ng-template #loading>
                <ion-grid>
                    <ion-row justify-content-center>
                        <ion-col col-2>
                            <ion-spinner name="circles"></ion-spinner>
                        </ion-col>
                        <ion-col col-6>
                            Cargando favoritos...
                          </ion-col>
                      </ion-row>
                </ion-grid>
              </ng-template>
          </ion-row>

          <!--ng-template #loggedout>
            <ion-grid>
                <ion-row justify-content-center>
                    <ion-col col-2>
                        <ion-spinner name="circles"></ion-spinner>
                    </ion-col>
                    <ion-col col-6>
                        No tiene favoritos
                      </ion-col>
                  </ion-row>
            </ion-grid>
          </ng-template-->
        </ion-list>
    </div>

      <ng-template #elseLogin>
        <ion-row text-center>
          <ion-col col-12>
            <button ion-button round (click)="login()" >Iniciar Sesión</button>
          </ion-col>
         </ion-row>
        <br>

        <ion-list>
        <ion-list-header color="light"> Personaliza tu experiencia. </ion-list-header>
          <ion-row text-center>
            <!--ion-col col-12>
              <span ion-button clear>Regístrate</span>
            </ion-col-->
            <ion-col>
              <button ion-button icon-left clear large (click)="register_mail()">
                <ion-icon ios="ios-mail" md="md-mail" ></ion-icon>
              </button>
            </ion-col>
            <ion-col>
              <button ion-button icon-left clear large (click)="register_fb()">
                <ion-icon ios="logo-facebook" md="logo-facebook"></ion-icon>
              </button>
            </ion-col>
          </ion-row>
        </ion-list>      
      </ng-template>
  </ion-content>
